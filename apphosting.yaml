# The apphosting.yaml configuration file specifies settings for your backend.
# This file is required for deploying to Firebase App Hosting.
# Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml

# The version of the App Hosting configuration schema.
# This is required and must be the first line of the file.
# The only supported value is 1.
version: 1

# The runtime to use for the backend.
# Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#runtime
runtime: nextjs

# Settings for server-side rendering and static content delivery.
# Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#serving
serving:
  # The region to serve the backend from.
  # Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#region
  region: us-central1
  # The number of backend instances to run.
  # Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#cpu
  cpu: 0.5
  # The amount of memory to allocate to the backend.
  # Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#memory
  memory: 512Mi
  # The headers to add to the response.
  # Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#headers
  headers:
    - key: 'X-Frame-Options'
      value: 'DENY'
    - key: 'X-Content-Type-Options'
      value: 'nosniff'
    - key: 'Referrer-Policy'
      value: 'no-referrer'
    - key: 'Permissions-Policy'
      value: 'microphone=(), camera=()'
  # The static assets to serve.
  # Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#static
  static:
    # A glob pattern of files to serve as static assets.
    # Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#include
    include:
      - 'public/**'
      - '.next/static/**'
  # The command to run to start the backend.
  # Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#exec
  exec:
    - 'npm'
    - 'run'
    - 'start'

# The build settings for the backend.
# Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#build
build:
  # The command to run to build the backend.
  # Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#command
  command: npm run build
  # The directory to run the build command in.
  # Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#builddir
  buildDir: .

# The environment variables to set.
# Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#env
# env:
#   - variable: 'NODE_ENV'
#     value: 'production'

# The secrets to mount.
# Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#secrets
# secrets:
#   - 'MY_SECRET'

# The number of concurrent requests to allow.
# Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#concurrency
concurrency: 80

# The timeout for the backend.
# Learn more at https://firebase.google.com/docs/hosting/app-hosting/reference/apphosting-yaml#timeout
timeout: 60
